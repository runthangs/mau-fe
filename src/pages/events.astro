---
import Layout from '../layouts/Layout.astro';

const upcomingEvents = [
  {
    title: "Coming Soon",
    date: "TBA",
    time: "TBA",
    location: "Masjid Al Ummah",
    image: "/images/logo/mau-icon-green.svg",
    description: "We are actively planning our next series of community events and workshops. Check back here or follow our updates page for announcements.",
    category: "Upcoming"
  }
];

const pastEvents = [
  {
    title: "Nascot Residents Association AGM",
    date: "2025-11-18",
    time: "19:30",
    location: "Quaker Centre, Nascot Wood",
    image: "/images/newsletters/mau-newsletter-2025-11-planning-update.jpg",
    description: "Presentation of our eco-friendly design and community plans to the Nascot Residents Association.",
    category: "Community"
  },
  {
    title: "Community Open Day & BBQ",
    date: "2025-08-17",
    time: "14:00 - 16:00",
    location: "68 Langley Road",
    image: "/images/newsletters/mau-newsletter-2025-08-issue-05-invite.jpg",
    description: "A successful summer gathering where the community reviewed proposed plans, enjoyed a BBQ, and provided valuable feedback.",
    category: "Open Day"
  },
  {
    title: "Spring Open Day",
    date: "2025-04-21",
    time: "14:00 - 17:00",
    location: "68 Langley Road",
    image: "/images/newsletters/mau-newsletter-2025-04-open-day-invite.jpg",
    description: "Our first major site opening, inviting the community to explore the grounds before the transformation begins.",
    category: "Open Day"
  }
];

function formatDate(dateString) {
  if (dateString === 'TBA') return 'Date To Be Announced';
  const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
  return new Date(dateString).toLocaleDateString('en-GB', options);
}
---

<Layout title="Events">
  <style>
    .ribbon {
      position: absolute;
      top: 0;
      right: 0;
      width: 150px;
      height: 150px;
      overflow: hidden;
      z-index: 10;
    }
    .ribbon::before {
      content: "Past Event";
      position: absolute;
      top: 30px;
      right: -35px;
      transform: rotate(45deg);
      background-color: #374151; /* gray-700 */
      color: white;
      text-transform: uppercase;
      font-size: 0.75rem;
      font-weight: 700;
      padding: 0.25rem 3rem;
      width: 200px;
      text-align: center;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      letter-spacing: 0.05em;
    }
  </style>

  <div class="bg-primary/5 py-20">
    <div class="container mx-auto px-4 text-center">
      <h1 class="text-4xl font-bold text-dark mb-6">Events</h1>
      <p class="text-lg text-gray-600 max-w-2xl mx-auto">
        Join us in building our community. From open days to workshops, find out what's happening at Masjid Al Ummah.
      </p>
    </div>
  </div>

  <!-- Upcoming Events Section -->
  <section class="py-16 bg-white">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl font-bold text-dark mb-10 border-l-4 border-primary pl-4">Upcoming Events</h2>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {upcomingEvents.map((event) => (
          <div class="bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden hover:shadow-xl transition-all duration-300 group">
            <div class="h-64 overflow-hidden relative bg-gray-50 flex items-center justify-center p-8">
              <img
                src={event.image}
                alt={event.title}
                class="w-auto h-full object-contain opacity-80 group-hover:opacity-100 transition-opacity duration-300"
              />
              <div class="absolute top-4 right-4">
                 <div class="bg-primary text-white px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide shadow-sm animate-pulse">
                  {event.category}
                </div>
              </div>
            </div>

            <div class="p-8">
              <div class="flex items-center text-sm text-gray-500 mb-4 space-x-4">
                <span class="flex items-center font-bold text-primary">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                  </svg>
                  {event.date}
                </span>
              </div>

              <h3 class="text-2xl font-bold text-dark mb-3 group-hover:text-primary transition-colors">{event.title}</h3>
              <p class="text-gray-600 text-base mb-4 leading-relaxed">{event.description}</p>
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Past Events Section -->
  <section class="py-16 bg-gray-50">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl font-bold text-dark mb-10 border-l-4 border-gray-500 pl-4">Past Events</h2>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {pastEvents.map((event) => (
          <div class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-lg transition-all duration-300 group opacity-90 hover:opacity-100">
            <div class="h-48 overflow-hidden relative">
              <div class="ribbon"></div>
              <img
                src={event.image}
                alt={event.title}
                class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110 grayscale group-hover:grayscale-0"
              />
              <div class="absolute top-4 right-4 flex flex-col gap-2 items-end">
                 <!-- Category Badge -->
              </div>
            </div>

            <div class="p-6">
              <div class="flex items-center text-sm text-gray-500 mb-3 space-x-4">
                <span class="flex items-center font-medium text-gray-600">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                  </svg>
                  {new Date(event.date).toLocaleDateString('en-GB', { day: 'numeric', month: 'short', year: 'numeric' })}
                </span>
                <span class="flex items-center">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                  </svg>
                  {event.time}
                </span>
              </div>

              <h3 class="text-xl font-bold text-dark mb-2 group-hover:text-primary transition-colors">{event.title}</h3>
              <p class="text-gray-600 text-sm mb-4 line-clamp-2">{event.description}</p>

              <div class="pt-4 border-t border-gray-100 flex items-center text-sm text-gray-500">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1 text-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                </svg>
                {event.location}
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>
</Layout>
